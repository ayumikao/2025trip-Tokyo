<!doctype html>
<html lang="zh-Hant">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>9/20 æ¾€è°· â†’ éŒå€‰ï½œäº’å‹•åœ°åœ–ï¼ˆv2ï¼‰</title>
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/>
<style>
  html,body,#map{height:100%;margin:0}
  .legend{background:#fff;padding:8px 10px;border-radius:8px;box-shadow:0 2px 8px rgba(0,0,0,.15);font:12px/1.5 system-ui,-apple-system,"Noto Sans TC","PingFang TC","Microsoft JhengHei",sans-serif}
  .legend .dot{display:inline-block;width:10px;height:10px;border-radius:50%;margin-right:6px;vertical-align:middle}
  .card{font-family:system-ui,-apple-system,"Noto Sans TC","PingFang TC","Microsoft JhengHei",sans-serif;min-width:240px;max-width:300px}
  .card h3{margin:0 0 6px;font-size:16px}
  .meta{color:#667;font-size:12px;margin:4px 0 6px}
  .tag{display:inline-block;border:1px solid #ccd;padding:2px 6px;border-radius:999px;font-size:12px;text-decoration:none;color:#223;margin-right:6px;margin-top:4px}
  .muted{color:#789}
</style>
</head>
<body>
<div id="map"></div>
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<script>
// Map base
const map = L.map('map').setView([35.318,139.55], 12);
L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {maxZoom: 19, attribution: '&copy; OpenStreetMap'}).addTo(map);

// Layers
const Lmain = L.layerGroup().addTo(map);
const Lopt = L.layerGroup().addTo(map);
const Ltoilet = L.layerGroup().addTo(map);

// Icons
function icon(color){ return L.divIcon({
  className:'', iconSize:[28,28], iconAnchor:[14,14], popupAnchor:[0,-10],
  html:`<svg width="28" height="28" viewBox="0 0 28 28" fill="none" xmlns="http://www.w3.org/2000/svg">
    <circle cx="14" cy="14" r="12" fill="white" stroke="${color}" stroke-width="2"/>
    <circle cx="14" cy="14" r="6" fill="${color}"/>
  </svg>`
});}
const icMain = icon('#2E86DE');
const icOpt  = icon('#9B59B6');
const icWC   = icon('#27AE60');

function addMarker(layer, lat, lng, title, time, note, link){
  const m = L.marker([lat,lng], {icon: layer===Lopt?icOpt:layer===Ltoilet?icWC:icMain}).addTo(layer);
  const linkHtml = link?`<a class="tag" target="_blank" href="${link}">ğŸ“ Google åœ°åœ–</a>`:'';
  m.bindPopup(`<div class="card"><h3>${title}</h3>${time?`<div class="meta">${time}</div>`:''}${note?`<div class="muted">${note}</div>`:''}${linkHtml}</div>`);
  return m;
}

// === Route points (approx) ===
const seq = [];
seq.push(addMarker(Lmain, 35.6580,139.7016, "æ¾€è°·å‡ºç™¼ï¼ˆåŒ…è»Šï¼‰", "06:30â€“08:00", "é ç•™ 1.5 å°æ™‚è»Šç¨‹ï¼ˆå«æ—©é«˜å³°å°å µè»Šï¼‰", ""));
addMarker(Ltoilet, 35.3099,139.5277, "ğŸš» 7-11 éŒå€‰ä¸ƒé‡Œã‚¬æµœåº—", "", "è·é›¢ä¸ƒé«˜æ­£é–€å‰ç´„ 4 åˆ†è»Šç¨‹ï¼›æœ‰åœè»Šä½ï¼Œå»æ‰€å°å¤–é–‹æ”¾", ""); 

seq.push(addMarker(Lmain, 35.3114,139.5341, "â‘  ä¸ƒé«˜æ­£é–€å‰ï¼ˆç§äººæ‹ç…§é»ï¼‰", "08:00â€“08:20", "çŒç±ƒé«˜æ‰‹å ´æ™¯ï¼Œæ¸…æ™¨å…‰ç·šå¥½", ""));
seq.push(addMarker(Lmain, 35.3069,139.5259, "â‘¡ é¡¯è¨¼å¯ºï¼ˆç§äººæ‹ç…§é»ï¼‰", "08:20â€“08:50", "æ—©å…‰ç·šæŸ”å’Œã€äººå°‘ï¼›ğŸš» ç„¡å…¬å»ï¼ˆéœ€åˆ°éŒ¢æ´—å¼è²¡å¤©æˆ–å°ç”ºé€šï¼‰", ""));

seq.push(addMarker(Lmain, 35.332861,139.518890, "â‘¢ æ¹˜å—æ·±æ¾¤ç«™ï¼ˆå€’æ›éµè·¯ï¼‰", "09:00â€“09:30", "ç´„ 7 åˆ†é˜ä¸€ç­è»Šï¼Œå¯æ‹ 3â€“4 ç­ï¼›ğŸš» è¥¿å£æœ‰å…¬å»", ""));

// Zeniarai (approx)
seq.push(addMarker(Lmain, 35.3249,139.5451, "â‘£ éŒ¢æ´—å¼è²¡å¤© å®‡è³€ç¦ç¥ç¤¾", "09:40â€“10:50", "æ°´æ´—éŒ¢æœƒç™¼å¤§è²¡ï¼›ç·šé¦™+è Ÿç‡­+ç±ƒå­ 200 æ—¥å¹£ï¼›å…¥å£å³å´æœ‰ç°¡æ˜“å»æ‰€", ""));

seq.push(addMarker(Lmain, 35.3213,139.5566, "â‘¤ å°ç”ºé€šå•†åº—è¡—ï¼ˆ600mï¼‰", "11:00â€“13:30", "å¤šåº— 10:00 é–‹ï¼›èŒ¶èŒ¶ï¼é•·é ¸é¹¿å’–å“©éºµåŒ…ï¼ç« é­šå¤©å©¦ç¾…ï¼å¥¶æ²¹é´¿å­é¤…ä¹¾ï¼å¡å£«é”å¤§ä½›ï¼å°é»ƒç“œ 250ï¼›7-11 æœ‰ä¼´æ‰‹ç¦®ï¼›ğŸš» å¤šè™•å…¬å»", ""));

// Optional Hachimangu
addMarker(Lopt, 35.3269,139.5591, "ï¼ˆå¯æœ‰å¯ç„¡ï¼‰é¶´å²¡å…«å¹¡å®®ï¼ˆæŠ½å¾¡æ‰‹ï¼‰", "12:50â€“13:50", "å¢ƒå…§å…¬å»", "");

seq.push(addMarker(Lmain, 35.3167,139.5352, "â‘¥ é«˜å¾·é™¢ï¼ˆéŒå€‰å¤§ä½›ï¼‰", "13:45â€“14:45", "é–‹æ”¾ 8:00â€“17:30ï¼›å¤§äºº 300ï¼å°å­¸ç”Ÿ 150ï¼ˆç¾é‡‘ï¼‰ï¼›+50 å…¥å…§ï¼›å¯ºå…§èˆ‡å‡ºå£æœ‰å»æ‰€", ""));

// Enoshima shopping and lodging and sunset
addMarker(Lopt, 35.3088,139.4900, "ï¼ˆå¯æœ‰å¯ç„¡ï¼‰YAMAKA æ±Ÿä¹‹å³¶åº—", "15:00â€“15:50", "ä¼´æ‰‹ç¦®è³¼ç‰©ï¼›åº—å…§æœ‰å»æ‰€", "");
seq.push(addMarker(Lmain, 35.3109,139.4857, "â‘¦ Rana ç‰‡ç€¬æ±Ÿãƒå³¶", "15:55â€“16:15", "æœ¬æ—¥ä½å®¿ 16:00â€“10:00", ""));
seq.push(addMarker(Lmain, 35.2988,139.4806, "â‘§ æ±Ÿä¹‹å³¶ï¼ˆçœ‹å¤•é™½ï¼‰", "16:50â€“18:30", "æ‰‹æ‰¶æ¢¯ï¼šå¤§äºº 360ï¼å°å­¸ç”Ÿ 180ï¼›é’éŠ…é³¥å±…å…¥å£ã€å•†åº—è¡—ã€ä¼´æ‰‹ç¦®ï¼›å‚æ™šéœ€å¤–å¥—ï¼›ğŸš» å³¶å…¥å£ã€å„ç¥ç¤¾èˆ‡å•†åº—è¡—å‡æœ‰å»æ‰€", ""));

// Draw polyline
const latlngs = seq.map(m => m.getLatLng());
L.polyline(latlngs, {color:'#2E86DE', weight:4, opacity:.85}).addTo(Lmain);

// Fit bounds
map.fitBounds(L.latLngBounds(latlngs), {padding:[30,30]});

// Layer control
L.control.layers(null, {
  "ä¸»è¡Œç¨‹": Lmain,
  "å¯æœ‰å¯ç„¡": Lopt,
  "ğŸš» å»æ‰€": Ltoilet
}, {collapsed:false, position:'topleft'}).addTo(map);

// Legend
const legend = L.control({position:'bottomleft'});
legend.onAdd = function(){
  const div = L.DomUtil.create('div','legend');
  div.innerHTML = `
    <div><span class="dot" style="background:#2E86DE"></span>ä¸»è¡Œç¨‹</div>
    <div><span class="dot" style="background:#9B59B6"></span>å¯æœ‰å¯ç„¡</div>
    <div><span class="dot" style="background:#27AE60"></span>ğŸš» å»æ‰€</div>
    <div class="muted" style="margin-top:6px">æç¤ºï¼šé»åœ–æ¨™çœ‹è©³æƒ…ï¼Œå¯é–‹å°èˆªï¼›åº§æ¨™ç‚ºè¿‘ä¼¼å€¼ï¼Œå¯æä¾›ç²¾æº–é»ä½çµ¦æˆ‘å¾®èª¿ã€‚</div>`;
  return div;
};
legend.addTo(map);
</script>
</body>
</html>
