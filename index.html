<!doctype html>
<html lang="zh-Hant">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>9/20 æ¾€è°· â†’ éŒå€‰ å…¨å¤©äº’å‹•åœ°åœ–</title>
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/>
<style>
  html,body,#map{height:100%;margin:0}
  .legend{background:#fff;padding:8px 10px;border-radius:8px;box-shadow:0 2px 8px rgba(0,0,0,.15);font:12px/1.4 system-ui,-apple-system,"Noto Sans TC","PingFang TC","Microsoft JhengHei",sans-serif}
  .legend .dot{display:inline-block;width:10px;height:10px;border-radius:50%;margin-right:6px;vertical-align:middle}
  .card{font-family:system-ui,-apple-system,"Noto Sans TC","PingFang TC","Microsoft JhengHei",sans-serif;min-width:220px}
  .card h3{margin:0 0 6px;font-size:16px}
  .card .meta{color:#667;font-size:12px;margin-bottom:6px}
  .tag{display:inline-block;border:1px solid #ccd;padding:2px 6px;border-radius:999px;font-size:12px;text-decoration:none;color:#223;margin-right:6px;margin-top:4px}
  .muted{color:#789}
</style>
</head>
<body>
<div id="map"></div>
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<script>
// Base map
var map = L.map('map').setView([35.318,139.55], 12);
L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
  maxZoom: 19,
  attribution: '&copy; OpenStreetMap'
}).addTo(map);

// Groups
var gMain = L.layerGroup().addTo(map);
var gOptional = L.layerGroup().addTo(map);
var gToilet = L.layerGroup().addTo(map);

// Icons
function icon(color){ return L.divIcon({
  className:'',
  html:`<svg width="28" height="28" viewBox="0 0 28 28" fill="none" xmlns="http://www.w3.org/2000/svg">
  <circle cx="14" cy="14" r="12" fill="white" stroke="${color}" stroke-width="2"/>
  <circle cx="14" cy="14" r="6" fill="${color}"/></svg>`,
  iconSize:[28,28], iconAnchor:[14,14], popupAnchor:[0,-10]
});}
var icMain = icon('#2E86DE');
var icOptional = icon('#9B59B6');
var icToilet = icon('#27AE60');

// Helper
function addStop(group, lat, lng, title, time, htmlMore){
  var p = L.marker([lat,lng], {icon: group===gOptional?icOptional:icMain}).addTo(group);
  p.bindPopup(`<div class="card"><h3>${title}</h3><div class="meta">${time||''}</div>${htmlMore||''}</div>`);
  return p;
}
function addToilet(lat,lng,title,desc,link){
  var p = L.marker([lat,lng], {icon: icToilet}).addTo(gToilet);
  var linkHtml = link?`<a class="tag" target="_blank" href="${link}">ğŸ“ Google åœ°åœ–</a>`:'';
  p.bindPopup(`<div class="card"><h3>ğŸš» ${title}</h3><div class="meta">${desc||''}</div>${linkHtml}</div>`);
}

// Main route points (approx coords)
var pts = [];
pts.push(addStop(gMain, 35.6580,139.7016, "æ¾€è°·å‡ºç™¼ï¼ˆåŒ…è»Šï¼‰", "06:30â€“08:00", `<a class="tag" target="_blank" href="https://maps.app.goo.gl/">ğŸ“ Google åœ°åœ–</a><div class="muted">é ç•™ 1.5 å°æ™‚è»Šç¨‹ï¼ˆå«æ—©é«˜å³°å°å µè»Šï¼‰</div>`));
pts.push(addStop(gMain, 35.3114,139.5341, "â‘  ä¸ƒé«˜æ­£é–€å‰ï¼ˆç§äººæ‹ç…§é»ï¼‰", "08:00â€“08:50", `<a class="tag" target="_blank" href="https://maps.app.goo.gl/tMDZQV2oFisFafeV7">ğŸ“ Google åœ°åœ–</a><div class="muted">æ—¥æœ¬ç¥å¥ˆå·ç¸£é®å€‰å¸‚ Shichirigahamahigashi, 2 Chomeâˆ’3</div>`));
pts.push(addStop(gMain, 35.3069,139.5259, "â‘¡ é¡¯è¨¼å¯ºï¼ˆç§äººæ‹ç…§é»ï¼‰", "åŒæ™‚æ®µ", `<a class="tag" target="_blank" href="https://maps.app.goo.gl/oDdhczm5XfwWtLur6">ğŸ“ Google åœ°åœ–</a><div class="muted">æ—©å…‰ç·šæŸ”å’Œã€äººå°‘ã€‚ğŸš» ç„¡å…¬å»ï¼ˆéœ€åˆ°éŒ¢æ´—å¼è²¡å¤©æˆ–å°ç”ºé€šï¼‰ã€‚</div>`));
pts.push(addStop(gMain, 35.3276,139.5221, "â‘¢ æ¹˜å—æ·±æ¾¤ç«™ï¼ˆå€’æ›éµè·¯ï¼‰", "09:00â€“09:30", `<a class="tag" target="_blank" href="https://maps.app.goo.gl/">ğŸ“ Google åœ°åœ–</a><div class="muted">ç´„ 7 åˆ†é˜ä¸€ç­è»Šï¼Œå¯æ‹ 3â€“4 ç­ã€‚ğŸš» è»Šç«™å…§å…¬å»ï¼ˆè¥¿å£å´ï¼‰ã€‚</div>`));
pts.push(addStop(gMain, 35.3263,139.5469, "â‘£ éŒ¢æ´—å¼è²¡å¤©å®‡è³€ç¦ç¥ç¤¾", "09:40â€“10:50", `<a class="tag" target="_blank" href="https://maps.app.goo.gl/">ğŸ“ Google åœ°åœ–</a><div class="muted">æ°´æ´—éŒ¢æœƒç™¼å¤§è²¡ï¼›ç·šé¦™+è Ÿç‡­+ç±ƒå­ 200 æ—¥å¹£ã€‚ğŸš» å…¥å£å³å´æœ‰ç°¡æ˜“å»æ‰€ã€‚</div>`));
pts.push(addStop(gMain, 35.3213,139.5566, "â‘¤ å°ç”ºé€šå•†åº—è¡—", "11:00â€“13:30", `<a class="tag" target="_blank" href="https://maps.app.goo.gl/">ğŸ“ Google åœ°åœ–</a><div class="muted">600m é€›è¡—ç¾é£Ÿã€‚ğŸš» å¤šè™•å…¬å»ï¼ˆ7-11ã€LAWSONã€å•†åº—è¡—å…¬å»ï¼‰ã€‚</div>`));
pts.push(addStop(gMain, 35.3167,139.5352, "â‘¥ é«˜å¾·é™¢ï¼ˆéŒå€‰å¤§ä½›ï¼‰", "13:45â€“14:45", `<a class="tag" target="_blank" href="https://maps.app.goo.gl/">ğŸ“ Google åœ°åœ–</a><div class="muted">å¤§äºº 300ã€å°å­¸ç”Ÿ 150ï¼ˆç¾é‡‘ï¼‰ï¼Œ+50 å¯å…¥å…§éƒ¨ã€‚ğŸš» å¯ºå…§èˆ‡å‡ºå…¥å£é™„è¿‘æœ‰å»æ‰€ã€‚</div>`));
pts.push(addStop(gMain, 35.3088,139.4900, "â‘¦ YAMAKA æ±Ÿä¹‹å³¶åº—", "15:00â€“15:50", `<a class="tag" target="_blank" href="https://maps.app.goo.gl/">ğŸ“ Google åœ°åœ–</a><div class="muted">ä¼´æ‰‹ç¦®è³¼ç‰©ã€‚ğŸš» åº—å…§æœ‰å»æ‰€ã€‚</div>`));
pts.push(addStop(gMain, 35.3109,139.4857, "â‘§ Rana ç‰‡ç€¬æ±Ÿãƒå³¶ï¼ˆä½å®¿ï¼‰", "15:55â€“16:15", `<a class="tag" target="_blank" href="https://maps.app.goo.gl/7SVngCJPpPaxi4Sy6">ğŸ“ Google åœ°åœ–</a><div class="muted">Check-in 16:00â€“10:00ã€‚</div>`));
pts.push(addStop(gMain, 35.2988,139.4806, "â‘¨ æ±Ÿä¹‹å³¶ï¼ˆçœ‹å¤•é™½ï¼‰", "16:50â€“18:30", `<a class="tag" target="_blank" href="https://maps.app.goo.gl/">ğŸ“ Google åœ°åœ–</a><div class="muted">é’éŠ…é³¥å±…å…¥å£ã€‚æ‰‹æ‰¶æ¢¯ï¼šå¤§äºº360/å°å­¸ç”Ÿ180ã€‚å‚æ™šéœ€å¤–å¥—ã€‚ğŸš» å³¶å…¥å£ã€å„ç¥ç¤¾èˆ‡å•†åº—è¡—å‡æœ‰å»æ‰€ã€‚</div>`));

// Optional stops
addStop(gOptional, 35.3269,139.5591, "ï¼ˆå¯æœ‰å¯ç„¡ï¼‰é¶´å²¡å…«å¹¡å®®ï¼ˆæŠ½å¾¡æ‰‹ï¼‰", "12:50â€“13:50", `<a class="tag" target="_blank" href="https://maps.app.goo.gl/">ğŸ“ Google åœ°åœ–</a><div class="muted">å¢ƒå…§æœ‰å…¬å»ã€‚</div>`);

// Toilets (examples near key areas)
addToilet(35.3099,139.5277, "7-11 éŒå€‰ä¸ƒé‡Œã‚¬æµœåº—", "è·é›¢ä¸ƒé«˜æ­£é–€å‰ç´„ 4 åˆ†é˜è»Šç¨‹ï¼›æœ‰åœè»Šä½ï¼Œå»æ‰€å°å¤–é–‹æ”¾ã€‚", "https://maps.app.goo.gl/");

// Polyline route (approximate)
var latlngs = pts.map(m => m.getLatLng());
L.polyline(latlngs, {color:'#2E86DE', weight:4, opacity:.8}).addTo(gMain);

// Fit bounds
map.fitBounds(L.latLngBounds(latlngs), {padding:[30,30]});

// Controls
L.control.layers(null, {
  "ä¸»è¡Œç¨‹": gMain,
  "å¯æœ‰å¯ç„¡": gOptional,
  "ğŸš» å»æ‰€": gToilet
}, {collapsed:false, position:'topleft'}).addTo(map);

// Legend
var legend = L.control({position:'bottomleft'});
legend.onAdd = function(){
  var div = L.DomUtil.create('div','legend');
  div.innerHTML = `
    <div><span class="dot" style="background:#2E86DE"></span>ä¸»è¡Œç¨‹</div>
    <div><span class="dot" style="background:#9B59B6"></span>å¯æœ‰å¯ç„¡</div>
    <div><span class="dot" style="background:#27AE60"></span>ğŸš» å»æ‰€</div>
    <div class="muted" style="margin-top:6px">æç¤ºï¼šé»åœ–æ¨™çœ‹è©³æƒ…ï¼Œå¯ç›´æ¥é–‹å•Ÿ Google åœ°åœ–å°èˆªã€‚</div>`;
  return div;
};
legend.addTo(map);
</script>
</body>
</html>
